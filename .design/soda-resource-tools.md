# soda-media-tools

## 产品定义

专为国内各类资源（成人、电影、电视剧、动漫、音乐、书籍、有声书、游戏、写真、漫画）爱好者提供的集下载源管理（公域站点、私域站点、网盘）、内容订阅、资源下载、资源管理、媒体刮削、事件通知功能于一身的易于使用的资源管理自动化工具。

- 使用人群：国内各类资源爱好者。
- 主要功能：下载源管理（公域站点、私域站点、网盘）、内容订阅、资源下载、资源管理、媒体刮削、事件通知。
- 产品特色：易于使用的资源管理自动化工具。

## 用户需求

> 一条用户需求可以看作是“目标用户”在“合理场景”下的“用户目标”，其实就是解决“谁”在“什么环境下”想要“解决什么问题”。

- 用户可以管理已下载的资源，将资源按照不同的类别分类，方便自己搜索和查阅。
- 用户可以对已下载的媒体资源进行刮削（电影、电视剧、动漫等），并在Emby、Plex等媒体播放平台显示自己的媒体资源海报墙，方便自己浏览和播放视频。
- 用户可以管理私域下载源（PT），查看私域站点的等级、积分、做种、分享率等信息，并可以将信息分享给其他用户。
- 用户可以管理公域下载源（网站和网盘，例如：公共下载网站（DYTT、动漫吧）、百度网盘），方便快速查询其中内容。
- 用户可以在站点源中（全部下载源或某一下据源）对某个符合用户期望特征的资源进行搜索和订阅，以满足自动化追更、下载、管理、刮削、通知的需求。
  - 当订阅的资源更新时自动触发下载，将其下载到设定好的目录中。
  - 当资源下载完成后，自动对其进行整理和媒体刮削。
  - 当各类事件完成后可以在微信、钉钉、telegram等平台上通知给用户。
- 用户可以在多端设备（PC/NAS/TV/Phone）上进行订阅资源。
- 用户可以借助评分平台（豆瓣/TMDB）浏览当前最流行的媒体内容，并订阅资源。
- 用户可以浏览其他用户最受欢迎的下载资源，显示资源相关信息，并订阅资源。

## 产品功能

> 产品功能可以看做是“产品”如何分步骤、分阶段解决用户的某项需求的描述。

- 产品提供资源整理的能力，可按照资源的类别，基于用户设置的源目录进行识别，将结果转移或链接到用户设置的目标目录（或者是默认缓存目录）。
- 产品提供自动添加媒体库的能力，基于资源整理的能力，可以将分类结果目录快速设置给Emby、Plex等媒体播放平台作为媒体库，减少用户手动配置。
- 产品提供对媒体资源刮削的能力，对下载的资源进行刮削，将媒体相关的信息、封面、截图等信息写到资源同目录下，方便媒体库使用，可以用作效果显示。
- 产品提供私域站点管理的能力，维护站点（可增加、删除站点、保存Cookie），站点数据备份，测试站点连通性，站点获取用户信息并展示。
- 产品提供私域站点数据统计的能力，可以统计所有私域站点的总上传量、总下载量、做种总数、做种总体积、历史数据，可以展示各私域站的关键信息，例如：用户名、上传量、下载量、做种数量、分享率、积分数量等信息，并可以导出分享。
- 产品提供在私域站点内索引的能力，可以获取私域站点内关于某一资源的结果数据，并将其整理解析后展示给用户，例如：按照清晰度、大小、是否免费等策略排序结果。
- 产品提供公域站点管理的能力，可对接网站、网盘等。
- 产品提供在公域站点内索引的能力，可以获取公域站点内关于某一资源的结果数据，并将其整理解析后展示给用户，例如：按照清晰度、大小等策略排序结果。
- 产品提供订阅资源等能力，可以对某些符合特征（站点、清晰度、发布组）的资源进行订阅，会按照周期在私域站点内索引相关资源，并将种子交给下载器。
- 产品提供配置下载器的能力，通过配置类型、地址、端口、用户名、密码登信息后，可在产品中使用下载器的能力，并将下载的种子交给下载器下载。
- 产品提供监听下载器状态的能力，可以知道下载进度，下载状态。
- 产品提供串联私域资源订阅、种子下载、种子资源整理、种子资源刮削的能力，做到订阅后的全自动化。
- 产品提供发现资源的能力，可以显示豆瓣、TMDB等网站的排行榜供用户浏览。
- 产品提供订阅发现页的资源的能力。
- 产品提供插件能力，增强产品的可玩性。

- 资源分类：
  - 成人：人名、类别、番号
  - 影音：
    - 电影：国内、欧美、日韩
    - 电视剧：国内、欧美、日韩
    - 动漫：国内、欧美、日韩
  - 音乐：人名、年代、类型
  - 书籍
    - 电子书
    - 漫画
    - 写真
    - 有声书
  - 游戏

- 基本型需求:
  - 产品提供资源整理的能力
  - 产品提供自动添加媒体库的能力
  - 产品提供对媒体资源刮削的能力
  - 产品提供私域站点管理的能力
  - 产品提供私域站点数据统计的能力

- 期望型需求:
  - 产品提供在私域站点内索引的能力
  - 产品提供订阅资源等能力
  - 产品提供配置下载器的能力
  - 产品提供监听下载器状态的能力
  - 产品提供串联私域资源订阅、种子下载、种子资源整理、种子资源刮削的能力，做到订阅后的全自动化。

- 兴奋型需求:
  - 产品提供发现资源的能力
  - 产品提供订阅发现页的资源的能力
  - 产品提供公域站点管理的能力
  - 产品提供在公域站点内索引的能力
  - 产品提供插件能力

## 需求拆解

### 基础功能

- 用户登录页面
- 产品提供资源整理的能力

### 其他

#### P0 - 媒体管理（用于管理资源）

- 海报墙：

- 媒体刮削：
  - 功能点：识别电视剧、电影、动漫中得特征信息。
  - 功能点：通过对媒体文件夹进行名称识别，然后刮削将相关媒体信息保存到目录文件夹下，例如：banner、演员信息等。

- 媒体同步：
  - 功能点：对源媒体目录进行识别，按照类别整体媒体目录，通过多种同步方式（移动、复制、软连接、硬链接），将整理结果同步到目标目录，并在目标目录刮削媒体目录。
  - 子功能：
    - 自动媒体同步：
      - 按照周期定时进行媒体同步。
    - 手动媒体同步：
      - 手动触发媒体同步。

- 媒体同步历史：
  - 功能点：手动、自动媒体同步的记录信息。

- 清理媒体同步缓存:
  - 功能点：
    - IMDB缓存
    - 同步历史

- 设置：
  - 媒体同步设置：
    - 源目录
      - 本地源
      - 网盘源
    - 目标目录
    - 默认文件转移方式
    - 电视剧、电影媒体同步命名规则
      - 电影重命名格式：
        - {title} ({year})/{title}-{part} ({year}) - {videoFormat}
      - 电视剧重命名格式：
        - {title}.{year}/S{season}/{title}. {season_episode}
    - 高质量文件覆盖
  - TMDB设置:
    - TMDB API Key:  6f5b96d0d7253117c44963a0ce8aa6f2
    - TMDB API Url:
    - 二级分类策略：
    - TMDB语言：
    - TMDB图片代理：
  - 刮削设置：
    - 元数据：
      - 电影：
        - 基础信息
        - 演员
        - 演员中文
      - 电视剧：
        - 基础信息
        - 演员
        - 演员中文
      - 电视剧-集-级：
        - 季-基础信息：
        - 集-基础信息：
        - 集-演员：
    - 图片：
      - 电影图片：
        - poster
        - fanart
        - background
        - logo
        - disc
        - banner
        - thumb
      - 电视剧图片
        - poster
        - fanart
        - background
        - logo
        - clearart
        - banner
        - thumb
      - 电视剧-季图片：
        - poster
        - banner
        - thumb
      - 电视剧-集图片
        - thumb
        - thumb-ffmpeg

#### P0 - 设置

- 基础设置
  - 系统
    - 日志：
      - 日志输出类型：
        - 控制台
      - 日志级别：INFO/DEBUG/ERROR
    - WEB：
      - 端口
      - 管理员
        - 用户名
        - 用户密码
      - User-Agent
  - 软件更新
  - 安全
    - 秘钥
